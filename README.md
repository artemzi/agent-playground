## Agent

Простой Go‑агент, работающий с локальной LLM через `ollama`.

### Требования

- Установлен `ollama` (см. инструкции на сайте `https://ollama.com`)
- Go 1.22+ (или совместимая версия из `go.mod`)

### Запуск модели `deepseek-r1:8b` в ollama

1. Загрузите и запустите модель:

   ```bash
   ollama run deepseek-r1:8b
   ```

   При первом запуске `ollama` скачает образ модели, это может занять несколько минут.

2. Убедитесь, что `ollama` запущен (демон должен работать, как правило он стартует автоматически после первой команды `ollama run`).

### Запуск Go‑проекта

В отдельном терминале из корня репозитория выполните:

```bash
go run main.go
```

После этого можно взаимодействовать с агентом (см. логи/подсказки в консоли или дополнительную документацию, если она появится позже).

### Типичный рабочий цикл

1. **Запустить LLM через ollama**:
   ```bash
   ollama run deepseek-r1:8b
   ```
2. **Запустить приложение**:
   ```bash
   go run main.go
   ```
3. **Тестировать и изменять код**:
   - Вносите правки в `main.go` и файлы в папке `internal/`.
   - Перезапускайте `go run main.go` для проверки изменений.

### Запуск тестов

```bash
# Запуск всех тестов
go test ./...

# Запуск с подробным выводом
go test ./... -v

# Запуск с отчётом о покрытии
go test ./... -cover

# Покрытие по пакетам (текущее):
# - internal/model:   100%
# - internal/session: 85.7%
# - internal/config:  52.9%
# - internal/chat:    22.9%
```

### Структура проекта

```
agent/
├── main.go                    # Точка входа
├── internal/
│   ├── chat/                  # Логика чата с LLM
│   │   ├── chat.go
│   │   └── chat_test.go
│   ├── config/                # Конфигурация из .env
│   │   ├── config.go
│   │   └── config_test.go
│   ├── errors/                # Кастомные ошибки
│   │   └── errors.go
│   ├── model/                 # Модели данных
│   │   ├── message.go
│   │   └── message_test.go
│   └── session/               # Управление сессиями
│       ├── session.go
│       └── session_test.go
└── chats/                     # Сохранённые чаты (JSON)
```
